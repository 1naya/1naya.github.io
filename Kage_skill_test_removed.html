 <!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Application：能力检定</title>
	<link href="Kage.svg" rel="shortcut icon">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body, html {
            height: 100%;
            font-family: Arial, sans-serif;
             /* 取消滚动 overflow: hidden;*/
        }

        /* 设置背景图片 */
        body {
            /*background: url('https://images.hdqwalls.com/download/memories-of-my-travels-0v-1920x1080.jpg') no-repeat center center fixed;
            background-size: cover;*/
			background-image: linear-gradient(45deg, #fac69b 25%, #ffefd5 25%, #ffefd5 50%, #fac69b 50%, #fac69b 75%, #ffefd5 75%, #ffefd5 100%);
			background-size: 84.85px 84.85px;
        }

        .header-container {
            display: flex;
            justify-content: space-between; /* 左右分布 */
            align-items: center;
            padding: 10px 50px;
            margin-top: 0px;
        }

        .header-left {
            display: flex;
            align-items: center;
            background-color: #ece6d9;
            border-radius: 10px;
            border: 2px solid black;
            border-bottom: 4px solid black;
            border-right: 3px solid black;
            padding: 10px 10px;
            flex-grow: 1; /* 自适应宽度 */
            height: 60px; /* 固定高度 */
        }

        .logo {
            height: 40px;
            margin-right: 15px;
        }

        .title {
            font-size: 20px;
            font-weight: bold;
        }

        .header-right-container {
            display: flex;
            align-items: center;
            margin-left: 20px;
        }

        .header-right {
            position: relative;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #ece6d9;
            border-radius: 10px;
            border: 2px solid black;
            border-bottom: 4px solid black;
            border-right: 3px solid black;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            top: 65px; /* 增加与 header 的距离 */
            right: 0;
            background-color: #ece6d9;
            box-shadow: 0px 8px 16px rgba(0, 0, 0, 0.2);
            z-index: 1;
            border-radius: 10px;
            border: 2px solid black;
            border-bottom: 4px solid black;
            border-right: 3px solid black;
            width: 150px;
        }

        .dropdown-content a {
            color: black;
            padding: 10px;
            text-decoration: none;
            display: block;
            border-radius: 8px;
            font-weight: bold;
        }

        .dropdown-content a:hover {
            background-color: #f1f1f1;
        }

        .dropdown-toggle {
            width: 30px;
            height: 30px;
            background: url('arrow-down-left-square-fill.svg') no-repeat center center;
            background-size: contain;
            cursor: pointer;
        }

        .header-right.show .dropdown-content {
            display: block;
        }
		
		.my-footer {
		    display: flex;
            justify-content: right; /* 左分布 */
            align-items: center;
            padding: 10px 50px;
            margin-top: 10px;
			margin-left: 50px;
			margin-right: 50px;
			background-color: #ece6d9;
            border-radius: 10px;
            border: 2px solid black;
            border-bottom: 4px solid black;
            border-right: 3px solid black;
            padding: 10px 10px;
            flex-grow: 1; /* 自适应宽度 */
            height: 60px; /* 固定高度 */
			font-size: 20px;
            font-weight: bold;
		}
		.inayalogo {
		    height: 40px;
			margin-left: 10px;
			margin-right: 10px;
		}
		
		
		
		
        /* MOVEIN EXTRA */
        .movein {
            display: block;
            justify-content: space-between; /* 左右分布 */
            align-items: center;
            margin-left:50px;
            margin-right:50px;
            margin-top: 5px;
            background-color: #ece6d9;
            border-radius: 10px;
            border: 2px solid black;
            border-bottom: 4px solid black;
            border-right: 3px solid black;
        
        }

        .test-box {
        /* text-align: center; */
			
        
        }

        .test-title {
            font-weight:bold;
            border-bottom: 2px solid black;
            padding: 5px 10px;
        }

        .test-button {
            color: black;
            font-weight:bold;
            border: 2px solid black;
			border-right: 3px solid black;
			border-bottom: 4px solid black;
            border-radius: 3px;
            padding: 10px 10px;
            font-size: 16px;
            cursor: help;
            margin: 12px;
            transition: background-color 0.3s, transform 0.2s;
        }

        .test-simple {
            background-color: #8BC34A;
        }

        .test-simple:hover {
            background-color: #7CB342;
        }

        .test-normal {
            background-color: #FFC107;
        }

        .test-normal:hover {
            background-color: #FFB300;
        }

        .test-hard {
            background-color: #F44336;
        }

        .test-hard:hover {
            background-color: #E53935;
        }

        .test-group-title {
            padding:0px 10px;
            font-weight:bold;

        }

        .test-result {
            color: chocolate;
            font-size: 18px;
            font-weight:bold;
            padding:10px 10px;

        }

        .test-group {
            margin-bottom: 20px;
        }

        .test-button:active {
            transform: scale(0.98);
        }

        .hideInfo {
        	float: right;
            /*margin-top:-315px;*/
            margin-right:15px;
			margin-top:50px;
        }
		
		.explain {
			padding:20px;
			font-weight: bold;
			color:darkgreen;
		}
		
		.sectionbox{
			display: flex;
			border-bottom: 2px solid black;
		}
		
		/* HTML: <div class="tooltip">This is a Tooltip<br> with a solid<br> coloration</div> */
		.tooltip {
		  color: #fff;
		  font-size: 18px;
		  max-width: 28ch;
		  text-align: center;
		  float: right;
		  margin-left: -50px;
		  margin-top: -20px;
		}
		.tooltip {
		  /* triangle dimension */
		  --a: 20deg; /* angle */
		  --h: 1em; /* height */

		  --p: 43.199999999999996deg; /* the position */
		  --r: 1em;  /* the radius */

		  padding: 1em;
		  aspect-ratio: 1;
		  width: fit-content;
		  border-radius: 50%;
		  background: SandyBrown; /* the color  */
		  display: grid;
		  place-content: center;
		  position: relative;
		  z-index: 0;
		}
		.tooltip:before {
		  content: "";
		  position: absolute;
		  inset: calc(-1*var(--h));
		  z-index: -1;
		  background: inherit;
		  clip-path: polygon(
			calc(50% + (50% - var(--h))*sin(var(--a)/2)) calc(50% + (50% - var(--h))*cos(var(--a)/2)),
			50% 100%,
			calc(50% - (50% - var(--h))*sin(var(--a)/2)) calc(50% + (50% - var(--h))*cos(var(--a)/2))
		  );
		  rotate: var(--p);
		}
		/* end HTML: <div class="tooltip">This is a Tooltip<br> with a solid<br> coloration</div> */
		
        /* MOVEIN EXTRA */

        /* 适应小屏幕 */
        @media (max-width: 750px) {

            .header-container {
                display: flex;
                justify-content: space-between; /* 左右分布 */
                align-items: center;
                padding: 10px 20px;
                margin-top: 3px;
        }

            .title {
                font-size: 16px;
            }

            .header-left {
                padding: 5px 15px;
                height: 50px; /* 小屏幕时的高度 */
            }

            .logo {
                height: 30px;
            }

            .dropdown-toggle {
                width: 30px;
                height: 30px;
            }

            .header-right {
                width: 50px;
                height: 50px;
            }

            .movein {
                display: block;
                justify-content: space-between; /* 左右分布 */
                align-items: center;
                margin-left:20px;
                margin-right:20px;
                margin-top: 0px;
                background-color: #ece6d9;
                border-radius: 10px;
                border: 2px solid black;
                border-bottom: 4px solid black;
                border-right: 3px solid black;
            }

            .dropdown-content {
                top: 50px; /* 增加与 header 的距离 */
            }

            .hideInfo {
				display:none;
            }
			
			.sectionbox{
			display: block; 
			}
			
			.my-footer{
			margin-left: 20px;
			margin-right: 20px;	
			}
        }
    </style>
</head>
<body>

<div class="header-container">
    <div class="header-left">
		<a href="Kage_home.html"><img src="Kage_v.svg" alt="Logo" class="logo"></a>
        <div class="title">影栖坊桌游</div>
    </div>
    <div class="header-right-container">
        <div class="header-right" id="dropdown">
            <div class="dropdown-toggle"></div>
            <div class="dropdown-content">
                <a href="Kage_home.html">Home：首页</a>
                <a href="Kage_skill_assign.html">App：技能选取</a>
                <a href="Kage_skill_test.html">App：技能检定</a>
                <a href="Kage_battle.html">App：战斗说明</a>
            </div>
        </div>
    </div>
</div>

<div class="movein">
    <div class="test-title"> <span style="color:blue">𒊹</span>&nbsp;<span style="color:chocolate">𒊹</span>&nbsp;&nbsp;&nbsp; Application：能力检定</div>
    <div class="sectionbox"><!--右边加点东西，包一层-->  
    
		<div class="test-box">
        <div id="result" class="test-result"></div>    
        <div class="test-group">
                <div class="test-group-title">✦ 简单难度检定：</div>
                <button class="test-button test-simple" onclick="drawTest('+0', 'simple')">技能等级 +0</button>
                <button class="test-button test-simple" onclick="drawTest('+1', 'simple')">技能等级 +1</button>
                <button class="test-button test-simple" onclick="drawTest('+2', 'simple')">技能等级 +2</button>
        </div>

        <div class="test-group">
                <div class="test-group-title">✦ 普通难度检定：</div>
                <button class="test-button test-normal" onclick="drawTest('+0', 'normal')">技能等级 +0</button>
                <button class="test-button test-normal" onclick="drawTest('+1', 'normal')">技能等级 +1</button>
                <button class="test-button test-normal" onclick="drawTest('+2', 'normal')">技能等级 +2</button>
        </div>

        <div class="test-group">
                <div class="test-group-title">✦ 困难难度检定：</div>
                <button class="test-button test-hard" onclick="drawTest('+0', 'hard')">技能等级 +0</button>
                <button class="test-button test-hard" onclick="drawTest('+1', 'hard')">技能等级 +1</button>
                <button class="test-button test-hard" onclick="drawTest('+2', 'hard')">技能等级 +2</button>
        </div>
        
    	</div>
		<div class="explain">
			<span style="font-size: 21px;">技能抽卡检定说明（适用于线下游戏）<br><br></span>
			<span style="color:SaddleBrown;font-size: 18px; ">技能等级 +0：<br></span>
			简单测试：抽一张牌并展示结果。<br>
			普通测试：抽两张牌，较差的一张为结果。<br>
			困难测试：抽四张牌，最差的一张为结果。<br><br>
			<span style="color:SaddleBrown;font-size: 18px;">技能等级 +1：<br></span>
			简单测试：抽两张牌，较好的一张为结果。<br>
			普通测试：抽一张牌并展示结果。<br>
			困难测试：抽两张牌，较差的一张为结果。<br><br>
			<span style="color:SaddleBrown;font-size: 18px;">技能等级 +2：<br></span>
			简单测试：抽四张牌，最好的一张为结果。<br>
			普通测试：抽两张牌，较好的一张为结果。<br>
			困难测试：抽一张牌并展示结果。<br>
			
		</div>	
    <div class="hideInfo"><p class="tooltip"> 来玩呀~</p>
		<a href="#"><img src="fuwafuwa.png" alt="Placeholder Image" width="200" ></a>
		</div>
	</div>
	<div style="display: flex;">
		    <button class="test-button" id="magicButton">伤势值检定</button>
    		<div id="displayArea" style=" font-weight:bold; padding: 5px 10px; margin-top: 15px; color:darkred; font-size: 21px;"></div>
	</div>
	<div class="explain">
	<span style="font-size: 21px;color:darkred;">✦ 根据战斗以及剧情影响，由主持人决定玩家判定轻伤，中伤，或者是重伤判定。✦<br><br></span>
	轻伤<br>
		较轻：无影响，某些情况下可能会影响外观，比如可能影响与警察或其他人交流。没有数值上的惩罚，可能影响剧情。<br>
		较重：动作相关的技能（力量、敏捷、战斗技巧）将受到 -1 惩罚。<br><br>

	中伤<br>
		较轻：动作相关的技能（力量、敏捷、战斗技巧）将受到 -2 惩罚；智力相关技能（调查、学识、技术使用）将受到 -1 惩罚。<br>
		较重：所有技能将受到 -2 惩罚，根据情况可能会有额外的心理影响。<br><br>

	重伤<br>
		较轻：玩家能够勉强移动，如果不及时接受治疗，将面临生命危险。<br>
		较重：玩家失去意识，无法继续行动，必须立即接受治疗。<br>
	
	</div>
</div>

	
<footer class="my-footer">

	Powered By <a href="#"><img src="Inaya_v_ZH.svg" alt="Logo" class="inayalogo"></a>
</footer>
<script>
    // 获取下拉菜单元素
    const dropdown = document.getElementById('dropdown');
    const dropdownContent = dropdown.querySelector('.dropdown-content');

    // 点击按钮显示/隐藏下拉菜单
    dropdown.querySelector('.dropdown-toggle').addEventListener('click', function(event) {
        event.stopPropagation();
        dropdown.classList.toggle('show');
    });

    // 点击空白处隐藏下拉菜单
    window.addEventListener('click', function() {
        dropdown.classList.remove('show');
    });

    // 阻止点击下拉菜单时关闭菜单
    dropdownContent.addEventListener('click', function(event) {
        event.stopPropagation();
    });
</script>
    <script>
        let deck;

        function resetDeck() {
            deck = [];
            for (let i = 0; i < 18; i++) deck.push("Success");
            for (let i = 0; i < 18; i++) deck.push("Failure");
            deck.push("Super Success");
			deck.push("Super Success");
            deck.push("Super Failure");
			deck.push("Super Failure");
            shuffle(deck);
        }

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function drawCard() {
            return deck.pop();
        }

        function drawTest(level, type) {
            resetDeck();

            let drawCount;
            let chooseFunc;

            if (level === '+0') {
                if (type === 'simple') {
                    drawCount = 1;
                    chooseFunc = result => result[0];
                } else if (type === 'normal') {
                    drawCount = 2;
                    chooseFunc = getWorseResult;
                } else if (type === 'hard') {
                    drawCount = 4;
                    chooseFunc = getWorseResult;
                }
            } else if (level === '+1') {
                if (type === 'simple') {
                    drawCount = 2;
                    chooseFunc = getBetterResult;
                } else if (type === 'normal') {
                    drawCount = 1;
                    chooseFunc = result => result[0];
                } else if (type === 'hard') {
                    drawCount = 2;
                    chooseFunc = getWorseResult;
                }
            } else if (level === '+2') {
                if (type === 'simple') {
                    drawCount = 4;
                    chooseFunc = getBetterResult;
                } else if (type === 'normal') {
                    drawCount = 2;
                    chooseFunc = getBetterResult;
                } else if (type === 'hard') {
                    drawCount = 1;
                    chooseFunc = result => result[0];
                }
            }

            let currentDraw = [];
            for (let i = 0; i < drawCount; i++) {
                currentDraw.push(drawCard());
            }

            let finalResult = chooseFunc(currentDraw);
            document.getElementById("result").innerHTML = `抽取结果: ${currentDraw.join(", ")} <br> 判定结果: ${finalResult}`;
        }

        function getBetterResult(result) {
            const priority = { "Super Success": 4, "Success": 3, "Failure": 2, "Super Failure": 1 };
            return result.reduce((best, card) => priority[card] > priority[best] ? card : best, result[0]);
        }

        function getWorseResult(result) {
            const priority = { "Super Success": 4, "Success": 3, "Failure": 2, "Super Failure": 1 };
            return result.reduce((worst, card) => priority[card] < priority[worst] ? card : worst, result[0]);
        }
    </script>
	
	<script>
        const specialFunctions = ["较轻", "较重", ];
        
        document.getElementById("magicButton").onclick = function() {
            const randomIndex = Math.floor(Math.random() * specialFunctions.length);
            document.getElementById("displayArea").innerText = specialFunctions[randomIndex];
        };
    </script>

</body>
</html>
